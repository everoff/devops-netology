# Домашнее задание к занятию "6.6. Troubleshooting"

## Задание 1
Для начала с помощью операции db.currentOp(true) можно получить перечень всех операций, выполняющихся в данный момент. После чего выполнением db.killOp(opid) завершаем необходимую операцию с opid.
## Задание 2
Предположу, что проблема в механизме очистки просроченных записей. Согласно оф. документации существует два вида очистки: "lazy" и "active".
В случае с "active", процесс запускается 10 раз в секунду(каждые 100 мсек), и в случае когда мы имеем более 25% записей со статус просрочен, алгоритм зацикливается, что приводит к блокировки приема новых запросов, пока процент просроченных записей не упадет <25.

## Задание 3
Судя по всему запрашивается слишком большой объем данных из БД. Возникает несколько идей для решения:
- увеличить значение для параметра max_allowed_packet;
- оптимизировать запрос в БД, возможно это поможет.

## Задание 4
Это происходит из-за нехватки оперативный памяти и OOMKiller(компонент Linux) скорее всего завершает процесс PostgresSQL для освобождения памяти.
Чтобы это исключить нужно сконфигурировать параметры в sysctl.conf.
