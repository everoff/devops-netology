# Домашняя работа к занятию "10.06. Инцидент-менеджмент"

## Задание 1

Составьте постмотрем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

| Этап                            | Описание    |
| :---                            |         ---:|
| Краткое описание инцидента      | Произошел сбой, начавшийся в 22:52 UTC 21 октября 2018 и продлившийся 24 часа 11 минут. В результат него, системы отображали устаревшие данные. Пользовательские данные не пострадали. |
| Предшествующие события          | Регламентная замена вышедшего из строя 100G оптического оборудования. |
| Причина инцидента               | Потеря связи между сетевым концентратором на восточном побережье США и основным центром обработки данных на восточном побережье США. |
| Воздействие                     | В течение промежутка времени 24 часа 11 минут на сайте Github отображалась неактуальная информацию |
| Обнаружение                     | В 22:54 UTC 21 октября системы мониторинга начали генерировать оповещения о сбоях |
| Реакция                         | К 23:02 UTC инженеры команды быстрого реагирования определили, что топологии, что топологии многочисленных кластеров баз данных находятся в непредвиденном состоянии. Запрос API Orchestrator показал топологию репликации базы данных, которая включала только серверы из центра обработки данных на западном побережье США. В 23:09 инциденту был присвоем желтый статус. После чего был предупрежден координатов инфидентов, он же изменил статус на ркасный. |
| Восстановление | В 00:05 UTC начали разработку плана по устраению несоответствий данных. В 00:41 UTC был инициирован процесс восстановления данных из backup. В 06:41 UTC было завершено восстановление данных и начата репликация данных с новых даных с ЦОД западного побережья. |
| Таймлайн| 22:52  UTC 21.10.2018  - произошел сбой соединения между ЦОД восточного и западного побережья. <br>  22:54 UTC 21.10.2018 - сбой обнаружен системой мониторинга. <br> 23:02 UTC 21.10.2018 - определение причины сбоя, связанной с непредвиденным состоянием кластеров баз данных. <br> 23:09 UTC 21.10.2018 - присвоение событию желтого статуса. <br> 23:11 UTC 21.10.2018 - присвоение событию красного статуса. <br> 23:13 UTC 21.10.2018 - привлечение дополнительных инженеров и анализ ситуации. <br> 23:19 UTC 21.10.2018 - принятие решения об остановке выполняемых задач, записывающих метаданные. <br> 00:05 UTC 22.10.2018 - разработка плана восстановления. <br> 00:41 UTC 22.10.2018 - инициирован процесс восстановления кластеров из backup. <br> 06:51 UTC 22.10.2018 - окончание процесса восстановления, начало процесса репликации. <br> 07:46 UTC 22.10.2018- было опубликовано сообщение об инфиденте в блоге. <br> 11:12 UTC 22.10.2018 - окончание репликации кластеров. <br> 13:15 UTC 22.10.2018 - предоставление дополнительных реплик MySQL для уменьшения задержи репликации на чтение. <br> 16:24 UTC 22.10.2018 - окончание синхронизации реплик. Статус сервисов сохранен на красном уровне. <br> 16:45 UTC 22.10.2018 - обработка очереди событий, которая возникла за время сбоя в системе. <br> 23:03 UTC 22.10.2018 - подтверждение восстановления данных, статус сайта изменен на зеленый. |
| Последующие действия           | Анализ двоичных журналов MySQL, содержащие записи, которые были сделаны на основном сайте, но которые не были реплицированы на сайт западного побережья. Изменена настройка конфигурации Orchestrator, чтобы предотвратить продвижение основных баз данных через региональные границы. Ускорен переход на новый механизм отчетности о состоянии дел, который обеспечит более богатую площадку для обсуждения активных инцидентов. За несколько недель до инцидента начата общекорпоративная инициатива по поддержке обслуживания трафика GitHub из нескольких ЦОД, поддержка резервирования N+1. Введение системной практики проверки сценариев сбоев. Инвестиция в инструменты хаос-инжинирнга. |
